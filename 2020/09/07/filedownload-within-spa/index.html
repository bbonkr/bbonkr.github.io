<!DOCTYPE html><html lang="ko" prefix="og: http://ogp.me/ns#"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title>SPA μ—μ„ νμΌ λ‹¤μ΄λ΅λ“ Β· {bbon}</title><meta name="description"><meta name="og:title" content="SPA μ—μ„ νμΌ λ‹¤μ΄λ΅λ“"><meta name="og:type" content="website"><meta name="og:url" content="http://bbon.me/2020/09/07/filedownload-within-spa/"><meta name="og:image" content="/images/logo.png"><meta name="og:description"><meta name="twitter:card" content="summary"><meta name="witter:site" content="@bbonkr"><meta name="witter:creator" content="@bbonkr"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.ico"><link rel="stylesheet" href="/css/chiangmai.css"><link rel="stylesheet" href="/css/prism.css"><link rel="search" type="application/opensearchdescription+xml" href="http://bbon.me/atom.xml" title="{bbon}"><meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/atom.xml" title="{bbon}" type="application/atom+xml">
</head><body class="post"><div id="fb-root"></div><div class="wrap"><header><nav class="navi-post"><a class="navi-post-back" href="javascript:history.back()"><i class="fa fa-arrow-left" aria-hidden="true"></i></a><a class="navi-post-home" href="/"><i class="fa fa-home" aria-hidden="true"></i></a></nav></header><main class="post"><div class="post"><article class="post-block"><h1 class="post-title">SPA μ—μ„ νμΌ λ‹¤μ΄λ΅λ“</h1><div class="post-info"><div class="post-info-profile"><a href="https://github.com/bbonkr" target="_blank"><img src="/images/me.png"></a></div><div class="post-info-details"><div class="post-categories"><a href="/categories/HowTo" target="_self"><span>HOWTO</span></a></div><div class="post-date">2020λ…„ 9μ›” 7μΌ</div></div></div><div class="post-share"><div class="fb-like" data-href="http://bbon.me/2020/09/07/filedownload-within-spa/" data-layout="button_count" data-action="like" data-size="small" data-show-faces="true" data-share="false">                 </div><div class="fb-share-button" data-href="http://bbon.me/2020/09/07/filedownload-within-spa/" data-layout="button" data-size="small" data-mobile-iframe="true"></div></div><div class="post-content"><p>SPA <small>Single Page Application</small> λ΅ μ‘μ„±μ¤‘μΈ μ›Ή μ‘μ©ν”„λ΅κ·Έλ¨μ—μ„ νμΌ λ‹¤μ΄λ΅λ“λ¥Ό κµ¬ν„ν•  λ•, μƒ μ°½μΌλ΅ λ‹¤μ΄λ΅λ“ν•  νμΌμ URIλ¥Ό μ κ³µν•΄μ„ μ²λ¦¬ν•λ©΄ λ§¤μ° νΈλ¦¬ν•κ² νμΌμ„ λ‹¤μ΄λ΅λ“ν•  μ μμµλ‹λ‹¤.</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> fileDownloadUri <span class="token operator">=</span> <span class="token string">'νμΌ λ‹¤μ΄λ΅λ“ URI'</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>fileDownloadUri<span class="token punctuation">,</span> <span class="token string">'_blank'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<p>νμΌ URIμ™€ ν•¨κ» μΈμ¦μ΄ ν•„μ”ν•  λ•, μΏ ν‚¤λ¥Ό μ‚¬μ©μ¤‘μ΄λ©΄ λ™μΌν•κ² μ‚¬μ©ν•λ©΄ λ©λ‹λ‹¤.</p>
<p>κ·Έλ°λ°, μΏ ν‚¤λ¥Ό μ‚¬μ©ν•μ§€ μ•κ³ , JWT λ“±μ„ μ‚¬μ©ν•΄μ„ μ”μ²­ ν—¤λ”μ— λ°μ΄ν„°λ¥Ό μ κ³µν•λ” ν•μ‹μΌλ΅ μΈμ¦μ„ μ²λ¦¬μ¤‘μ΄λ©΄, μƒμ°½μ„ μ—΄μ–΄μ„ μ²λ¦¬ν•λ” λ°©μ‹μΌλ΅λ” μ²λ¦¬κ°€ λ¶κ°€λ¥ν•©λ‹λ‹¤.</p>
<p>μ΄ λ•, μ‚¬μ©ν•  μ μλ” κ°„λ‹¨ν• μ½”λ“μ΅°κ°μ„ npm ν¨ν‚¤μ§€λ΅ κ³µμ ν•©λ‹λ‹¤.</p>
<h2 id="π“Ά-bbon-filedownload-ν¨ν‚¤μ§€"><a href="#π“Ά-bbon-filedownload-ν¨ν‚¤μ§€" class="headerlink" title="π“Ά @bbon/filedownload ν¨ν‚¤μ§€"></a>π“Ά @bbon/filedownload ν¨ν‚¤μ§€</h2><p><a href="https://www.npmjs.com/package/@bbon/filedownload" target="_blank" rel="noopener">npm: @bbon/filedownload ν¨ν‚¤μ§€</a> νμ΄μ§€μ—μ„ ν¨ν‚¤μ§€λ¥Ό ν™•μΈν•μ‹¤ μ μμµλ‹λ‹¤.</p>
<h2 id="π› -μ„¤μΉ"><a href="#π› -μ„¤μΉ" class="headerlink" title="π›  μ„¤μΉ"></a>π›  μ„¤μΉ</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">npm</span> <span class="token function">install</span> @bbon/filedownload<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">yarn</span> <span class="token function">add</span> @bbon/filedownload<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h2 id="π®-μ‚¬μ©"><a href="#π®-μ‚¬μ©" class="headerlink" title="π® μ‚¬μ©"></a>π® μ‚¬μ©</h2><p>HTTP μ”μ²­μ€ μ‚¬μ©μ¤‘μΈ ν¨ν‚¤μ§€ λλ” APIλ¥Ό μ‚¬μ©ν•μ‹λ©΄ λ©λ‹λ‹¤.</p>
<p>μ‘λ‹µ ν•μ‹μ€ <code>BLOB</code> μΌλ΅ μ§€μ •λμ–΄μ•Ό ν•©λ‹λ‹¤.</p>
<p>AWS S3, Azure Storage, Google Cloud Storage λ“±μ ν΄λΌμ°λ“ κ°μ²΄ μ €μ¥μ†μ— μ‚¬μ©μ΄ κ°€λ¥ν•©λ‹λ‹¤.<br>λ¬Όλ΅ , μ§μ ‘ κµ¬ν„ν• μ›Ή μ‘μ©ν”„λ΅κ·Έλ¨μ BLOB μ‘λ‹µμ—λ„ μ‚¬μ©κ°€λ¥ν•©λ‹λ‹¤.</p>
<p>μμ  μ½”λ“μ—μ„ HTTP μ”μ²­μ€ <a href="https://www.npmjs.com/package/axios" target="_blank" rel="noopener">Axios ν¨ν‚¤μ§€</a>λ¥Ό μ‚¬μ©ν•©λ‹λ‹¤.</p>
<pre class="line-numbers language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">const</span> requestConfig<span class="token operator">:</span> AxiosRequestConfig <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
    <span class="token operator">...</span>Axios<span class="token punctuation">.</span>defaults<span class="token punctuation">,</span>
    responseType<span class="token operator">:</span> <span class="token string">'blob'</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>

Axios<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span>fileDownloadUrl<span class="token punctuation">,</span> requestConfig<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token keyword">const</span> contentType <span class="token operator">=</span>
                res<span class="token punctuation">.</span>headers<span class="token punctuation">[</span><span class="token string">'content-type'</span><span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token string">'application/octet-stream'</span><span class="token punctuation">;</span>
            <span class="token keyword">const</span> helper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileDownloadHelper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            helper<span class="token punctuation">.</span><span class="token function">download</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
                data<span class="token operator">:</span> res<span class="token punctuation">.</span>data<span class="token punctuation">,</span>
                filename<span class="token operator">:</span> fileName<span class="token punctuation">,</span>
                contentType<span class="token punctuation">,</span>
            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token keyword">finally</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
        <span class="token function">setLoading</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>μ „μ²΄μ½”λ“λ” <a href="https://github.com/bbonkr/bbon-filedownload-sample" target="_blank" rel="noopener">GitHub: bbon-filedownload-sample</a> μ €μ¥μ†μ—μ„ ν™•μΈν•μ‹¤ μ μμµλ‹λ‹¤.</p>
<p><a href="https://bbon.me/bbon-filedownload-sample/">π μμ  νμ΄μ§€</a>μ—μ„ λ™μ‘μ„ ν™•μΈν•μ‹¤ μ μμµλ‹λ‹¤. <small>(λ‹¤μ΄λ΅λ“ λ²„νΌμ„ ν΄λ¦­ν•λ©΄, λΉ¨κ°„ μ΄λ―Έμ§€λ¥Ό λ‹¤μ΄λ΅λ“ν•©λ‹λ‹¤. ν™•μΈν•μ‹¤ λ• λπ‘μ„ μ΅°μ‹¬ν•μ‹­μ‹μ¤.)</small></p>
</div></article></div></main><footer><div class="paginator"><a class="prev" href="/2020/06/01/wsl-2-windows-10-build-2004/"><i class="fa fa-arrow-left" aria-hidden="true"></i></a><a class="next" href="/2020/11/14/migrate-net-core-3-1-project-to-net-5/"><i class="fa fa-arrow-right" aria-hidden="true"></i></a></div><div class="copyright"><p>Β© 2019 - 2021 <a href="https://github.com/bbonkr" target="_blank">bbon</a>. Powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/stunstunstun/hexo-theme-chiangmai" target="_blank">hexo-theme-chiangmai</a>.</p></div></footer></div><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create','UA-64779499-1','auto');ga('send','pageview');</script></body></html>