{"version":3,"file":"component---src-pages-search-tsx-0bea2e1db585d5e9fd4c.js","mappings":"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","sources":["webpack://bbon.me/./src/components/categories/category-list.tsx","webpack://bbon.me/./src/components/categories/simple-category-list.tsx","webpack://bbon.me/./src/components/post-list-item.tsx","webpack://bbon.me/./src/pages/search.tsx"],"sourcesContent":["import * as React from 'react';\nimport { Tag } from '../../models/data';\n\ninterface CategoryListProps {\n    categories?: Tag[];\n    selectedCategory?: string;\n    onChange?: (category: string) => void;\n}\n\nexport const CategoryList = ({\n    categories,\n    selectedCategory,\n    onChange,\n}: CategoryListProps) => {\n    const handleClickTag = (tag: string) => () => {\n        if (onChange) {\n            onChange(tag);\n        }\n    };\n\n    return (\n        <ul className=\"flex flex-row flex-wrap break-words gap-3 px-4 py-3\">\n            {categories?.map((category) => (\n                <li\n                    key={category.fieldValue}\n                    className={`cursor-pointer text-green-600 dark:text-green-600  p-2 ${\n                        selectedCategory === category.fieldValue\n                            ? 'cursor-not-allowed border-green-600 border-b-2'\n                            : ''\n                    }`}\n                    onClick={handleClickTag(category.fieldValue)}\n                >\n                    {category.fieldValue} ({category.totalCount})\n                </li>\n            ))}\n        </ul>\n    );\n};\n","import { Link } from 'gatsby';\nimport * as React from 'react';\nimport kebabCase from 'lodash/kebabCase';\n\ninterface SimpleCategoryListProps {\n    categories?: string[];\n}\n\nexport const SimpleCategoryList = ({ categories }: SimpleCategoryListProps) => {\n    return (\n        <ul className=\"list-style-none flex gap-3 flex-wrap break-words\">\n            {categories?.map((category) => {\n                return (\n                    <li key={category}>\n                        <Link\n                            to={`/categories/${kebabCase(category)}`}\n                            className=\"text-base md:text-sm text-green-500 no-underline hover:underline\"\n                        >\n                            {category}\n                        </Link>\n                    </li>\n                );\n            })}\n        </ul>\n    );\n};\n","import { Link } from 'gatsby';\nimport * as React from 'react';\nimport { Post } from '../models/data';\nimport { SimpleTagList } from './tags';\nimport { SimpleCategoryList } from './categories';\n\nimport '../components/tags/tag-list.css';\n\ninterface PostListItemProps {\n    post: Post;\n}\n\nconst PostListItem = ({ post }: PostListItemProps) => {\n    const now = +new Date();\n    const postDate = Date.parse(`${post.node.frontmatter.date}`);\n    const tempDate = postDate + 1000 * 60 * 60 * 24 * 8;\n    const isNew = now < tempDate;\n\n    return (\n        <article\n            className=\"post-list-item py-6\"\n            itemScope\n            itemType=\"http://schema.org/Article\"\n        >\n            <header className=\"pt-6\">\n                <aside>\n                    {post.node.frontmatter.categories && (\n                        <SimpleCategoryList\n                            categories={post.node.frontmatter.categories}\n                        />\n                    )}\n                </aside>\n\n                <h2 className=\"font-bold font-sans break-words text-gray-900 dark:text-gray-100 pb-2 text-3xl md:text-4xl \">\n                    <Link to={post.node.fields.slug} itemProp=\"url\">\n                        <span itemProp=\"headline\">\n                            {post.node.frontmatter.title}\n                        </span>\n                    </Link>\n                </h2>\n\n                <div className=\"indicator pr-10\">\n                    {isNew && (\n                        <span className=\"indicator-item indicator-end indicator-middle badge badge-secondary\">\n                            NEW\n                        </span>\n                    )}\n                    <div>\n                        <small className=\"text-sm md:text-base font-normal text-gray-600 dark:text-gray-400\">\n                            {post.node.frontmatter.date.toLocaleString()}\n                        </small>\n                    </div>\n                </div>\n            </header>\n            <section className=\"article-body mt-1 break-words\">\n                <p\n                    dangerouslySetInnerHTML={{\n                        __html:\n                            (post.node.frontmatter.description ||\n                                post.node.excerpt) ??\n                            '',\n                    }}\n                    itemProp=\"description\"\n                />\n            </section>\n\n            <footer>\n                <aside className=\"text-base md:text-sm text-gray-500 flex flex-row\">\n                    <SimpleTagList tags={post.node.frontmatter.tags} />\n                </aside>\n            </footer>\n        </article>\n    );\n};\n\nexport default PostListItem;\n","import * as React from 'react';\nimport { graphql, PageProps } from 'gatsby';\nimport Layout from '../components/layout';\nimport Seo from '../components/seo';\nimport { Posts } from '../models/data';\nimport PostListItem from '../components/post-list-item';\n\ninterface FormValues {\n    keyword?: string;\n}\n\ninterface FormState {\n    values?: FormValues;\n}\n\nconst SearchPage = ({ data, location }: PageProps<Posts>) => {\n    const [formState, setFormState] = React.useState<FormState>({});\n\n    const siteTitle = data.site.siteMetadata?.title || `Title`;\n    const posts = data.allMarkdownRemark.edges;\n\n    const handleChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n        const value = event.target.value;\n        const name = event.target.name;\n\n        setFormState((prevState) => ({\n            ...(prevState ?? {}),\n            values: {\n                ...(prevState ?? {}).values,\n                [name]: value,\n            },\n        }));\n    };\n\n    const filteredPosts = React.useMemo(() => {\n        return (posts ?? []).filter((x) => {\n            if (!formState?.values?.keyword) {\n                return false;\n            }\n\n            const regex = new RegExp(`.*${formState.values.keyword}.*`, 'ig');\n            if (x.node.rawMarkdownBody && regex.test(x.node.rawMarkdownBody)) {\n                return true;\n            }\n\n            if (\n                x.node.frontmatter.title &&\n                regex.test(x.node.frontmatter.title)\n            ) {\n                return true;\n            }\n\n            return false;\n        });\n    }, [formState.values]);\n\n    if (posts && posts.length === 0) {\n        return (\n            <Layout location={location} title={siteTitle}>\n                <Seo title=\"All posts\" />\n\n                <p>\n                    No blog posts found. Add markdown posts to \"content/blog\"\n                    (or the directory you specified for the\n                    \"gatsby-source-filesystem\" plugin in gatsby-config.js).\n                </p>\n            </Layout>\n        );\n    }\n\n    return (\n        <Layout location={location} title={siteTitle}>\n            <Seo title=\"Search\" />\n\n            <header>\n                <h1>Search</h1>\n            </header>\n            <main>\n                <div className=\"w-full\">\n                    <label className=\"block\">\n                        <input\n                            type=\"text\"\n                            name=\"keyword\"\n                            className=\"mt-1 block w-full rounded-md shadow-sm border-green-600 focus:border-green-300 focus:ring focus:ring-green-200 focus:ring-opacity-50 dark:bg-gray-800\"\n                            onChange={handleChange}\n                            value={formState.values?.keyword ?? ''}\n                            placeholder=\"Keyword\"\n                        />\n                    </label>\n                </div>\n\n                <div className=\"flex flex-col justify-center items-center\">\n                    {filteredPosts.length > 0 ? (\n                        <React.Fragment>\n                            <p className=\"py-4 self-start\">{`Found ${\n                                filteredPosts.length\n                            } post${filteredPosts.length > 1 ? 's' : ''}`}</p>\n\n                            <ol className=\"list-style-none\">\n                                {filteredPosts.map((post) => {\n                                    return (\n                                        <li key={post.node.fields.slug}>\n                                            <PostListItem post={post} />\n                                        </li>\n                                    );\n                                })}\n                            </ol>\n                        </React.Fragment>\n                    ) : formState.values?.keyword ? (\n                        <p className=\"py-4\">\n                            Does not find post about {formState.values?.keyword}\n                        </p>\n                    ) : (\n                        <p></p>\n                    )}\n                </div>\n            </main>\n        </Layout>\n    );\n};\n\nexport const pageQuery = graphql`\n    query searchPageQuery {\n        site {\n            siteMetadata {\n                title\n            }\n        }\n        allMarkdownRemark(limit: 2000, sort: { frontmatter: { date: DESC } }) {\n            edges {\n                node {\n                    excerpt\n                    fields {\n                        slug\n                    }\n                    frontmatter {\n                        date(formatString: \"YYYY-MM-DD\")\n                        title\n                        description\n                        tags\n                        categories\n                        featuredImage {\n                            childImageSharp {\n                                gatsbyImageData(layout: FIXED)\n                            }\n                        }\n                    }\n                    rawMarkdownBody\n                }\n            }\n        }\n    }\n`;\n\nexport default SearchPage;\n"],"names":["CategoryList","_ref","categories","selectedCategory","onChange","React","className","map","category","key","fieldValue","onClick","tag","totalCount","SimpleCategoryList","Link","to","kebabCase","post","isNew","Date","parse","node","frontmatter","date","itemScope","itemType","fields","slug","itemProp","title","toLocaleString","dangerouslySetInnerHTML","__html","description","excerpt","SimpleTagList","tags","data","location","formState","setFormState","siteTitle","site","siteMetadata","_data$site$siteMetada","posts","allMarkdownRemark","edges","filteredPosts","filter","x","values","_formState$values","keyword","regex","RegExp","rawMarkdownBody","test","length","Layout","Seo","type","name","event","value","target","prevState","_formState$values2","placeholder","PostListItem","_formState$values3","_formState$values4"],"sourceRoot":""}