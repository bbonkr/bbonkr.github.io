{
    "componentChunkName": "component---src-templates-blog-post-tsx",
    "path": "/2019/09/11/typescript-make-module-definition-file/",
    "result": {"data":{"site":{"siteMetadata":{"title":"<bbon />","siteUrl":"https://bbon.me"}},"markdownRemark":{"id":"647ee066-54be-510c-b950-dd0f2bcc58c6","excerpt":"자바스크립트 Javascript로 작성되어 노드node로 동작하는 웹 응용프로그램을 타입스크립트 Typescript로 재작성하고 있습니다. npm…","html":"<p>자바스크립트 <small>Javascript</small>로 작성되어 노드<small>node</small>로 동작하는 웹 응용프로그램을 타입스크립트 <small>Typescript</small>로 재작성하고 있습니다.</p>\n<p>npm 패키지 중 모듈 정의가 없는 패키지가 있습니다.</p>\n<p>타입스크립트 코드를 작성할 때, 정상적으로 사용할 수가 없습니다.</p>\n<p>이 때, 패키지 제작자에게 모듈 정의 파일을 요청하거나, 작성중인 프로젝트에 모듈 정의 파일  <code class=\"language-text\">.d.ts</code> 파일을 작성해서 문제를 해결할 수 있습니다.</p>\n<h2>예제</h2>\n<p>예를 들어 <a href=\"https://www.npmjs.com/package/showdown-xss-filter\">showdown-xss-filter</a> 패키지를 사용중인 코드가 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> xssFilter <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'showdown-xss-filter'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>타입스크립트로 작성중인 코드에서 모듈의 정의를 찾을 수 없다고 합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">import</span> xssFilter <span class=\"token keyword\">from</span> <span class=\"token string\">'showdown-xss-filter'</span><span class=\"token punctuation\">;</span></code></pre></div>\n<blockquote>\n<p>에러 메시지:</p>\n<p>Could not find a declaration file for module ‘showdown-xss-filter’. ‘d:/repos/blog-node-backend/node_modules/showdown-xss-filter/showdown-xss-filter.js’ implicitly has an ‘any’ type.\\n Try <code class=\"language-text\">npm install @types/showdown-xss-filter</code> if it exists or add a new declaration (.d.ts) file containing `declare module ‘showdown-xss-filter’;</p>\n</blockquote>\n<p>타입스크립트 컴파일러의 제안을 참고해서 <a href=\"https://www.npmjs.com/search?q=%40types%2Fshowdown-xss-filter\">@types/showdown-xss-filter 패키지는 검색</a>해도 결과가 없습니다.</p>\n<p>첫번째 제안으로 해결되지 않으니, 두번째로 제안하는 <code class=\"language-text\">declare module 'showdown-xss-filter'</code>  코드를 포함하는 새 정의 파일을 만들어야 합니다.</p>\n<p>함수의 모양을 확인하기 위해 코드를 보니, <a href=\"https://www.npmjs.com/package/showdown-xss-filter\">showdown-xss-filter</a> 패키지의 내용은 매우 간략한 <a href=\"https://github.com/VisionistInc/showdown-xss-filter/blob/e26046384e266be5646ef0eb58816ff4029da565/showdown-xss-filter.js#L15\">코드</a>로 작성되어 있습니다.</p>\n<p>필요한 것은 <code class=\"language-text\">xssfilter</code> 함수의 정의 <code class=\"language-text\">식별자 Identifier</code>, <code class=\"language-text\">인수들 Arguments</code>, <code class=\"language-text\">반환형 Return type</code> 입니다.</p>\n<p>코드를 확인하고, 아래와 같이 모듈을 정의할 수 있습니다.</p>\n<blockquote>\n<p>다행히 showdonw은 모듈 정의가 존재합니다. ❤</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">npm</span> <span class=\"token function\">install</span> --save-dev @types/showdown</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token comment\">// @types/showdown-xss-filter.d.ts</span>\n<span class=\"token keyword\">declare</span> <span class=\"token keyword\">module</span> <span class=\"token string\">'showdown-xss-filter'</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">import</span> Showdown <span class=\"token keyword\">from</span> <span class=\"token string\">'showdown'</span><span class=\"token punctuation\">;</span>\n\n\n    <span class=\"token keyword\">function</span> <span class=\"token function\">xssFilter</span><span class=\"token punctuation\">(</span>\n        converter<span class=\"token operator\">?</span><span class=\"token operator\">:</span> Showdown<span class=\"token punctuation\">.</span>Converter<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> Showdown<span class=\"token punctuation\">.</span>ShowdownExtension<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> xssFilter<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>작성한 showdown-xss-filter.d.ts 파일을 typeRoots 로 지정된 디렉터리에 저장합니다.</p>\n<blockquote>\n<p>타입스크립트 프로젝트 tsconfig.json 파일에서 typeRoots 속성을 사용하지 않으면  rootDir 로 지정한 디렉터리에 <code class=\"language-text\">@types</code> 디렉터리를 만들고 그 안에 저장하면 됩니다.</p>\n</blockquote>","frontmatter":{"title":"타입스크립트 모듈 정의 파일 만들기","date":"September 11, 2019","description":null,"categories":["howto"],"tags":["typescript","ts","d.ts","타입스크립트","nodejs"],"github":null,"featuredImage":null,"draft":null,"comments":null}},"previous":{"fields":{"slug":"/2019/08/25/create-swap-file-on-ubuntu/"},"frontmatter":{"title":"Create SWAP file on Ubuntu","draft":null,"comments":null,"featuredImage":null}},"next":{"fields":{"slug":"/2019/09/29/visual-studio-item-template/"},"frontmatter":{"title":"Visual Studio Item Template","draft":null,"comments":null,"featuredImage":null}}},"pageContext":{"id":"647ee066-54be-510c-b950-dd0f2bcc58c6","previousPostId":"d6722727-8439-59e2-b1f7-cc99c29ec3bb","nextPostId":"f8e260f5-4fc4-5604-ad2b-5532cf420296"}},
    "staticQueryHashes": ["3068608076","3199328057"]}