{"componentChunkName":"component---src-templates-blog-post-tsx","path":"/2019/11/01/postman-variables-usages","result":{"data":{"site":{"siteMetadata":{"title":"<bbon />","siteUrl":"https://bbon.me"}},"markdownRemark":{"id":"cff25c3f-020f-5ce9-a586-005baacbe10a","excerpt":"HTTP API  웹 응용프로그램을 작성할 때,  Postman 을 많이 사용합니다. 작성한 API 가 잘 동작하는지 클라이언트에서 사용하는 것과 동일한 요청을 GUI…","html":"<p>HTTP API  웹 응용프로그램을 작성할 때,  <a href=\"https://www.getpostman.com/\">Postman</a> 을 많이 사용합니다.</p>\n<p>작성한 API 가 잘 동작하는지 클라이언트에서 사용하는 것과 동일한 요청을 GUI를 통해 실행할 수 있어 매우 편리합니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e3d96b6986c2df911fc55d65075c1304/3b5a6/postman-variable-usage-001.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 66.45569620253164%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABYlAAAWJQFJUiTwAAAByElEQVR42pWSTZLTMBCFfRbb8b8tWbL8J9uxM0CAmmLDEk7CKdhzNs7yeHImmRRVqZpZfNWtlvqpWy3veDxi2zb0fY+2bd+FIXNvsC4fMW3fYeczvPP5jIWip3XF59OC569f4GLuIhdfGX/Etp0wTz1OP37j26+/WH/+gdc0DRytMTCd2f2mNVw32I4TDK0xl7jWGprWVbb7V1RNKhgt4fV9x8OGLY88aPbWx9FimS2eZvq8pO06dBQZhgFtb6GlhJICZVWhcpTlDc8YvkVfwi4C1mqYpoYQFcqyQl6UtK+45N0vChQP8KSsmZhxQfIMWZYhJVma7v6+fvHTu9gjPMHy85zq+eNb/ycv8rvz+S0/dxUOfCNJUVnXqO9wMSHkZY/c710H13Bgum12q4zGwOfynj99wDRNGO2IaZ5hJ4t5PmKwC990hB0HDEwW8lVc1Qq1VpcLlILilCUxilPWnLD7pIrjV9y8VltVYrdCCIiyQJIkN+IkRhLfreP4xSbwAt9HGIYoVbsPpYgPSCNCm0QhMtowDBAEb8OLooiOj7yq0doNHVspswSHw4GEiMi7BA8UDOlkRYWGglI1e0u+fzngB28Xc4L/AOwYlt7lFvGoAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/e3d96b6986c2df911fc55d65075c1304/18dfc/postman-variable-usage-001.webp 158w,\n/static/e3d96b6986c2df911fc55d65075c1304/30002/postman-variable-usage-001.webp 315w,\n/static/e3d96b6986c2df911fc55d65075c1304/e59cf/postman-variable-usage-001.webp 630w,\n/static/e3d96b6986c2df911fc55d65075c1304/7bcb4/postman-variable-usage-001.webp 945w,\n/static/e3d96b6986c2df911fc55d65075c1304/bd21a/postman-variable-usage-001.webp 1260w,\n/static/e3d96b6986c2df911fc55d65075c1304/633a6/postman-variable-usage-001.webp 1302w\"\n              sizes=\"(max-width: 630px) 100vw, 630px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/e3d96b6986c2df911fc55d65075c1304/4d6f2/postman-variable-usage-001.png 158w,\n/static/e3d96b6986c2df911fc55d65075c1304/3c1ae/postman-variable-usage-001.png 315w,\n/static/e3d96b6986c2df911fc55d65075c1304/984b6/postman-variable-usage-001.png 630w,\n/static/e3d96b6986c2df911fc55d65075c1304/e7d8e/postman-variable-usage-001.png 945w,\n/static/e3d96b6986c2df911fc55d65075c1304/58c38/postman-variable-usage-001.png 1260w,\n/static/e3d96b6986c2df911fc55d65075c1304/3b5a6/postman-variable-usage-001.png 1302w\"\n            sizes=\"(max-width: 630px) 100vw, 630px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/e3d96b6986c2df911fc55d65075c1304/984b6/postman-variable-usage-001.png\"\n            alt=\"postman variable usage 001\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p><a href=\"https://www.getpostman.com/pricing\">무료 요금제</a> 를 사용해도 매우 많은 기능을 제공합니다.</p>\n<p>많은 기능 중 반복되는 값 - 예를 들면 기본 주소 -을 처리하기 위한 변수 기능을 좋아합니다.</p>\n<h2>변수 <small>Variable</small></h2>\n<h3>종류</h3>\n<p>변수는 글로벌, 콜렉션, 환경, 데이터, 로컬 단위로 관리가 가능합니다.</p>\n<blockquote>\n<ul>\n<li><a href=\"https://learning.getpostman.com/docs/postman/environments-and-globals/variables/#variable-scopes\">Variables scopes</a></li>\n</ul>\n</blockquote>\n<p>전역 변수와 환경 변수는 오른쪽 위 버튼을 클릭하면 관리 화면을 찾을 수 있습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 612px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/3d808d2ab61caacb3b77e00612421d18/dbf98/postman-variable-usage-002.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 38.60759493670886%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAABFElEQVR42o2QTWqEQBCF+zz+p7U1Koj/IsKAYYy6ySKQM2SZTbLNOqfKlV66ijRIZgKz+Hit/aq6XokwDCE1KpT42BXWRkKqBEkSI8sypGnKmHPfd9jXR32foK5rNE2DqqpQliXfCxVFuqFCpu7w/Vbg9SFCVrZo6gpd17F5GIbf4hYvz0/4+nxHcp9iWRbmdDphmiZuKjzPA+GSuq4++3C1Oo7D2LbNGB97XQdBEMD3ff42SghTQFgaqaMv5zP2fce6rli3DZuGotEENDHRti3iOMY4jhx1nmfkeQ5B0xyRUnJx3/ccmZQ47tPslPZfFAWUUvwIPXDRkLAs6wKzgiPkpWRG6Z/4z/iXa75riFuNtzb8Ae7lBjpsX71NAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/3d808d2ab61caacb3b77e00612421d18/18dfc/postman-variable-usage-002.webp 158w,\n/static/3d808d2ab61caacb3b77e00612421d18/30002/postman-variable-usage-002.webp 315w,\n/static/3d808d2ab61caacb3b77e00612421d18/d408e/postman-variable-usage-002.webp 612w\"\n              sizes=\"(max-width: 612px) 100vw, 612px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/3d808d2ab61caacb3b77e00612421d18/4d6f2/postman-variable-usage-002.png 158w,\n/static/3d808d2ab61caacb3b77e00612421d18/3c1ae/postman-variable-usage-002.png 315w,\n/static/3d808d2ab61caacb3b77e00612421d18/dbf98/postman-variable-usage-002.png 612w\"\n            sizes=\"(max-width: 612px) 100vw, 612px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/3d808d2ab61caacb3b77e00612421d18/dbf98/postman-variable-usage-002.png\"\n            alt=\"postman variable usage 002\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<blockquote>\n<ul>\n<li><a href=\"https://learning.getpostman.com/docs/postman/environments-and-globals/manage-globals/\">Managing global variables</a></li>\n</ul>\n</blockquote>\n<p>콜렉션 변수는 콜렉션 편집 화면에서 찾을 수 있습니다.</p>\n<blockquote>\n<ul>\n<li><a href=\"https://learning.getpostman.com/docs/postman/collections/managing-collections/#edit-and-view-collection-details\">Edit and view collection detail</a></li>\n</ul>\n</blockquote>\n<h3>사용</h3>\n<p>HTTP API 는 기본적으로 하나의 기능이 하나의 URI를 갖습니다.</p>\n<p>인증처리를 하는 URI</p>\n<div class=\"gatsby-highlight\" data-language=\"http\"><pre class=\"language-http\"><code class=\"language-http\">POST https://your-service.com/api/signin\n{\n    \"username\": \"&lt;your username>\",\n    \"password\": \"&lt;your password>\"\n}</code></pre></div>\n<p>매장 정보를 요청하는 URI</p>\n<div class=\"gatsby-highlight\" data-language=\"http\"><pre class=\"language-http\"><code class=\"language-http\">GET https://your-service.com/api/stores\nAuthorization Bearer &lt;your token></code></pre></div>\n<p>Postman 을 사용하면 보통 한번만 작성한 후 저장하면, 다시 불러서 사용할 수 있습니다.</p>\n<p>그런데, 동일한 API를 테스트 서버 대상, 스테이징 서버 대상, 프로덕션 서버 대상으로 테스트를 진행하려고 하면 주소 앞부분만 다르고 나머지 부분이 동일할 수 있습니다.</p>\n<blockquote>\n<p>해당 시나리오는 환경 변수를 사용하는 것이 더 좋겠습니다.</p>\n</blockquote>\n<p>예제 URI 의 <code class=\"language-text\">https://your-service.com</code> 부분이 다를 것입니다.</p>\n<p>콜렉션 편집 화면을 열고 변수 탭에서 아래 이미지와 같이 변수를 추가합니다.</p>\n<blockquote>\n<p>기본주소를 <code class=\"language-text\">http://localhost:3000</code> 으로 설정합니다.</p>\n</blockquote>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ddcf17017ec9bca1ce19b3a555d5b9b7/bb7f4/postman-variable-usage-003.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 43.67088607594937%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABYlAAAWJQFJUiTwAAABDUlEQVR42p1Q2U7EMBDL/7Q5ml7ZquotXthuC///L6YemgUh2JV4sJyZzNhO1DiOmKYJIQR475Hn+b9QFAWqqoJq21YK4tlC/mSGUEzHlBSOi7+B6b3/+z5ClWUJIkYms+a5Ojg/B6ehxzB08Idp5h8kpLNzDlmWSQoya2utnAvvEDKNpbZ4CQ6Nt6gzC2sMNKG/2BysuNx1nQikaSpNPr/vO3FMkgShrqRX1zWs1jBpIiLOGhRWwxuN0ulDNIXatk0E9TEYBZmMoAkFm6bBsiyY5xnhcpG+O2dyf7zsZEm4rqs4szAS/VOY4JmC0zRjf3vHtu243XZcr7c7Xr+x/GFMFf+NIo9h7uY/wfsP/+wh6XLYvAYAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/ddcf17017ec9bca1ce19b3a555d5b9b7/18dfc/postman-variable-usage-003.webp 158w,\n/static/ddcf17017ec9bca1ce19b3a555d5b9b7/30002/postman-variable-usage-003.webp 315w,\n/static/ddcf17017ec9bca1ce19b3a555d5b9b7/e59cf/postman-variable-usage-003.webp 630w,\n/static/ddcf17017ec9bca1ce19b3a555d5b9b7/7bcb4/postman-variable-usage-003.webp 945w,\n/static/ddcf17017ec9bca1ce19b3a555d5b9b7/d36b8/postman-variable-usage-003.webp 1192w\"\n              sizes=\"(max-width: 630px) 100vw, 630px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/ddcf17017ec9bca1ce19b3a555d5b9b7/4d6f2/postman-variable-usage-003.png 158w,\n/static/ddcf17017ec9bca1ce19b3a555d5b9b7/3c1ae/postman-variable-usage-003.png 315w,\n/static/ddcf17017ec9bca1ce19b3a555d5b9b7/984b6/postman-variable-usage-003.png 630w,\n/static/ddcf17017ec9bca1ce19b3a555d5b9b7/e7d8e/postman-variable-usage-003.png 945w,\n/static/ddcf17017ec9bca1ce19b3a555d5b9b7/bb7f4/postman-variable-usage-003.png 1192w\"\n            sizes=\"(max-width: 630px) 100vw, 630px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/ddcf17017ec9bca1ce19b3a555d5b9b7/984b6/postman-variable-usage-003.png\"\n            alt=\"postman variable usage 003\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<h2>예제</h2>\n<p>테스트 대상 웹 응용프로그램의 기본주소는 <code class=\"language-text\">http://localhost:3000</code> 입니다.</p>\n<p><code class=\"language-text\">/api/signin</code> 끝점으로 POST 요청을 하면 token 데이터를 얻을 수 있습니다.</p>\n<p><code class=\"language-text\">/api/stores</code> 끝점으로 요청 헤더에 Bearer 인증을 추가해서 GET 요청을 하면 사용자의 매장 정보를 얻을 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"http\"><pre class=\"language-http\"><code class=\"language-http\">POST /api/signin\n\n{\n    username,\n    password\n}</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"http\"><pre class=\"language-http\"><code class=\"language-http\">GET /api/stores\nAuthorization Bearer</code></pre></div>\n<p>Postman 컬렉션 편집 윈도우를 열고, 아래 변수 항목을 추가합니다.</p>\n<table>\n<thead>\n<tr>\n<th align=\"left\">이름</th>\n<th align=\"left\">초기값</th>\n<th align=\"left\">현재값</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"left\">baseurl</td>\n<td align=\"left\"></td>\n<td align=\"left\"><a href=\"http://localhost:3000\">http://localhost:3000</a></td>\n</tr>\n<tr>\n<td align=\"left\">token</td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n</tr>\n</tbody>\n</table>\n<p>Postman 의 현재 컬렉션에 signin 요청을 추가합니다.</p>\n<p>요청 URL은 <code class=\"language-text\">{{baseurl}}/api/signin</code> 을 입력합니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/3072892182ed117dbf4dd811d2eafab7/9d567/postman-variable-usage-004.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 35.44303797468354%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAABK0lEQVR42p2RS07EMAyGe5xpm5ameSdt+pxhZiTEgi0HQeImnIzb/DgZjYRAbFh8suPE9m+n2KPGOnoYwWFkDyc7iJ6jbR/QNM0vGGPQWuNyPuN6WjE4SWgEZxHjiGLbNgzjCKlUfmithTEm+38hpSIBHWY/Ii7P8GHHaCkmBYrjfqTKE5Z5wuMScb2csW07wkCPY8REd8nemSZiXhGDwvzyjqe3T8yvH5iXJecU967WWCiySZ2xBpeVCg43tUm1VnRHY+msXkEIAUkIIUkxja0FvCKFKUFpCe8dFI2dzs45DMHDUuI9lpJ8COA9FejavOOWdto2LO9WUSzFC8579LKCDYxUduh5i6qqcChLlN9IsZt/yP5PDmWydSrI888lGuqWOtZ1/S8axvAFpCTjVwWVhpwAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/3072892182ed117dbf4dd811d2eafab7/18dfc/postman-variable-usage-004.webp 158w,\n/static/3072892182ed117dbf4dd811d2eafab7/30002/postman-variable-usage-004.webp 315w,\n/static/3072892182ed117dbf4dd811d2eafab7/e59cf/postman-variable-usage-004.webp 630w,\n/static/3072892182ed117dbf4dd811d2eafab7/7bcb4/postman-variable-usage-004.webp 945w,\n/static/3072892182ed117dbf4dd811d2eafab7/bd21a/postman-variable-usage-004.webp 1260w,\n/static/3072892182ed117dbf4dd811d2eafab7/8717b/postman-variable-usage-004.webp 1360w\"\n              sizes=\"(max-width: 630px) 100vw, 630px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/3072892182ed117dbf4dd811d2eafab7/4d6f2/postman-variable-usage-004.png 158w,\n/static/3072892182ed117dbf4dd811d2eafab7/3c1ae/postman-variable-usage-004.png 315w,\n/static/3072892182ed117dbf4dd811d2eafab7/984b6/postman-variable-usage-004.png 630w,\n/static/3072892182ed117dbf4dd811d2eafab7/e7d8e/postman-variable-usage-004.png 945w,\n/static/3072892182ed117dbf4dd811d2eafab7/58c38/postman-variable-usage-004.png 1260w,\n/static/3072892182ed117dbf4dd811d2eafab7/9d567/postman-variable-usage-004.png 1360w\"\n            sizes=\"(max-width: 630px) 100vw, 630px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/3072892182ed117dbf4dd811d2eafab7/984b6/postman-variable-usage-004.png\"\n            alt=\"postman variable usage 004\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>응답에서 token 변수의 값을 설정하기 위해 Tests 탭으로 이동합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">pm<span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token string\">'call'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">var</span> jsonData <span class=\"token operator\">=</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span>responseBody<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>jsonData<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>jsonData<span class=\"token punctuation\">.</span>success<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>jsonData<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n                <span class=\"token keyword\">const</span> token <span class=\"token operator\">=</span> jsonData<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>token<span class=\"token punctuation\">;</span>\n                pm<span class=\"token punctuation\">.</span>environment<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"token\"</span><span class=\"token punctuation\">,</span> token<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// token 변수의 값을 설정</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ecb853a6aefeaf897d6e07dcff45c5b1/2637b/postman-variable-usage-005.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 55.69620253164557%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAABp0lEQVR42pWSTXKcMBCFuc4AQr/oD5BgUmbsuFKVO2SbA+RMuU4O9NLqie2FnYUXX6klWq9br+n2bHGsCd5oBKuRnYKheJomjOP4jmEYYKzF7TzxeHvAmiOWFJBSRNk2dLUW5GWlJAfjZljnMDdmT8wf4igvzBbXHJBTRYor1uCQvEN3njfsx4Fj33E7Cp6fnnBS9VIKaq2vFGJ7OdsPlNWjfvuJ77/+4PrjN65fHvh7F2N8rRyIRPsQAnzwCDFw3FjoSbWsFHveO2fpRQFzPGD9hoW6y35GZ4zBkhf2JEQLyxciizUfpZS0Sjgt2V9FeyEELPm4lw37lmldSCOx913rzCiNuhU8Pn/FeTuRm9E5cycvg+iJSz/c476HVhJLmJHJy0hIqTiXBUWbIFVd685+1kITKwnHsXOHTaQlC/E2bSUnWDVBiwHTSMUuF+6aBbXWfGmgyo2eOukpoef4PRdCkfhiRnglMFHczptW11SbJyz4CSTdcZK8lNTtdLdFKfUm+NFP/D8GQk8CWQskwpDg2IqQPSzYptlEP4MiwVneaU8e/gn+BROQYMZ6j4xwAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/ecb853a6aefeaf897d6e07dcff45c5b1/18dfc/postman-variable-usage-005.webp 158w,\n/static/ecb853a6aefeaf897d6e07dcff45c5b1/30002/postman-variable-usage-005.webp 315w,\n/static/ecb853a6aefeaf897d6e07dcff45c5b1/e59cf/postman-variable-usage-005.webp 630w,\n/static/ecb853a6aefeaf897d6e07dcff45c5b1/7bcb4/postman-variable-usage-005.webp 945w,\n/static/ecb853a6aefeaf897d6e07dcff45c5b1/bd21a/postman-variable-usage-005.webp 1260w,\n/static/ecb853a6aefeaf897d6e07dcff45c5b1/35ff6/postman-variable-usage-005.webp 1356w\"\n              sizes=\"(max-width: 630px) 100vw, 630px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/ecb853a6aefeaf897d6e07dcff45c5b1/4d6f2/postman-variable-usage-005.png 158w,\n/static/ecb853a6aefeaf897d6e07dcff45c5b1/3c1ae/postman-variable-usage-005.png 315w,\n/static/ecb853a6aefeaf897d6e07dcff45c5b1/984b6/postman-variable-usage-005.png 630w,\n/static/ecb853a6aefeaf897d6e07dcff45c5b1/e7d8e/postman-variable-usage-005.png 945w,\n/static/ecb853a6aefeaf897d6e07dcff45c5b1/58c38/postman-variable-usage-005.png 1260w,\n/static/ecb853a6aefeaf897d6e07dcff45c5b1/2637b/postman-variable-usage-005.png 1356w\"\n            sizes=\"(max-width: 630px) 100vw, 630px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/ecb853a6aefeaf897d6e07dcff45c5b1/984b6/postman-variable-usage-005.png\"\n            alt=\"postman variable usage 005\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<blockquote>\n<p>Test 탭의 오른쪽에 코드 조각이 제공됩니다.</p>\n</blockquote>\n<p>이제 <code class=\"language-text\">/api/signin</code> 끝점으로 요청을 보내면 응답 데이터에서 token 을 찾을 수 있으면 토큰 변수의 값이 설정됩니다.</p>\n<p>Postman 의 현재 컬렉션에 get stores 요청을 추가합니다.</p>\n<p>요청 URL은 <code class=\"language-text\">{{baseurl}}/api/stores</code> 를 입력합니다.</p>\n<p>Authorization 탭에서 인증 형식을 Bearer Token 으로 선택하고 토큰의 값은 변수를 사용할 것이므로 <code class=\"language-text\">{{token}}</code> 을 입력합니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/72c37c48ea1362786ed5f02d5809c08a/1b426/postman-variable-usage-006.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 48.10126582278481%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAABgUlEQVR42qWSS67VMAyGu5yr0+adNEmf6akuHA4MkECCERPWwfAugW2wKDbyY6dUOmJwJww+uXYT+7fjJqUeSmlCQRNjctjLjDVHZG8w9g7ROxhr65mu65CHAR/ud7y/vcE8JkxjxjRkbGVFs+87+r6HDwHeeyIghMN3/sD7418IoWKtQ3Iaa0oYhoKcJsyRC1s061qwrCuey4L77S1ut3copbzKdt2xTAHblxd8/PEb1++/ULYj3qQY8XwtuG4LuP1EVVkxK2F7fp8+W+e4EwffZ4RcEOKMOQVMRMMy5/7AGQUpJSIVYc6EjxyJieDRe27TIBA8f6M1t7zWIcecMYwjVXd1+GwZS4/BmL/2iFt4LRGIaCQs2ZYeSxDNREn4hcacEKlq17b1kqZql8sFLflMsAq9pW2guK6YimJrDAzBQhpemadOwikBTwjR1baFEHVFTpQUFY4/Iv/xm5/fNrx8HqBFi6dLWxNyAlb1mPBU+hp8rvm6eXxaaHGVrMr+lz8nIkRIe2mPyQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/72c37c48ea1362786ed5f02d5809c08a/18dfc/postman-variable-usage-006.webp 158w,\n/static/72c37c48ea1362786ed5f02d5809c08a/30002/postman-variable-usage-006.webp 315w,\n/static/72c37c48ea1362786ed5f02d5809c08a/e59cf/postman-variable-usage-006.webp 630w,\n/static/72c37c48ea1362786ed5f02d5809c08a/7bcb4/postman-variable-usage-006.webp 945w,\n/static/72c37c48ea1362786ed5f02d5809c08a/bd21a/postman-variable-usage-006.webp 1260w,\n/static/72c37c48ea1362786ed5f02d5809c08a/29890/postman-variable-usage-006.webp 1335w\"\n              sizes=\"(max-width: 630px) 100vw, 630px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/72c37c48ea1362786ed5f02d5809c08a/4d6f2/postman-variable-usage-006.png 158w,\n/static/72c37c48ea1362786ed5f02d5809c08a/3c1ae/postman-variable-usage-006.png 315w,\n/static/72c37c48ea1362786ed5f02d5809c08a/984b6/postman-variable-usage-006.png 630w,\n/static/72c37c48ea1362786ed5f02d5809c08a/e7d8e/postman-variable-usage-006.png 945w,\n/static/72c37c48ea1362786ed5f02d5809c08a/58c38/postman-variable-usage-006.png 1260w,\n/static/72c37c48ea1362786ed5f02d5809c08a/1b426/postman-variable-usage-006.png 1335w\"\n            sizes=\"(max-width: 630px) 100vw, 630px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/72c37c48ea1362786ed5f02d5809c08a/984b6/postman-variable-usage-006.png\"\n            alt=\"postman variable usage 006\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>준비를 마쳤습니다.</p>\n<p>Signin 요청을 먼저 실행해서 토큰을 얻고, Get stores 요청을 실행하면 이전 Signin 요청에서 얻은 토큰을 요청 헤더 인증 값으로 사용됩니다.</p>\n<p>그리고, 테스트 서버의 기본 주소가 변경되면 컬렉션 변수의 값만 변경하면 해당 컬렉션 내의 요청이 변경된 기본주소를 참조할 것 입니다.</p>\n<h2>오류 정정</h2>\n<p>2019-11-03 현재 컬렉션 변수는 스크립트 환경 <small>Pre-request Script, Tests</small> 에서 쓰기를 지원하지 않습니다.</p>\n<p>스크립트로 변수 값 쓰기를 하려면 전역 변수 또는 환경 변수를 사용해야 합니다.</p>\n<p>전역변수 쓰기</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">pm<span class=\"token punctuation\">.</span>globals<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"token\"</span><span class=\"token punctuation\">,</span> token<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>환경변수 쓰기</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">pm<span class=\"token punctuation\">.</span>environment<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"token\"</span><span class=\"token punctuation\">,</span> token<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2>참조</h2>\n<ul>\n<li><a href=\"https://learning.getpostman.com/\">Postman: Learning Center</a></li>\n<li><a href=\"https://blog.getpostman.com/2014/01/27/extracting-data-from-responses-and-chaining-requests/\">Extracting data from response and chaning requests</a></li>\n</ul>","frontmatter":{"title":"Postman: Variables usages","date":"2019-11-01","description":null,"categories":["howto"],"tags":["postman","test","tools","api","http api","restful api"],"github":null,"featuredImage":null,"draft":null,"comments":null}},"previous":{"fields":{"slug":"/2019/09/29/visual-studio-item-template/"},"frontmatter":{"title":"Visual Studio Item Template","draft":null,"comments":null,"featuredImage":null}},"next":{"fields":{"slug":"/2019/12/31/review-2019/"},"frontmatter":{"title":"Review 2019","draft":null,"comments":null,"featuredImage":null}}},"pageContext":{"id":"cff25c3f-020f-5ce9-a586-005baacbe10a","previousPostId":"f8e260f5-4fc4-5604-ad2b-5532cf420296","nextPostId":"4baa8c5f-d7fb-5961-8c8e-1cd453c040ab"}},"staticQueryHashes":["2644450635","3199328057"],"slicesMap":{}}