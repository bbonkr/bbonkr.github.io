{"componentChunkName":"component---src-templates-blog-post-tsx","path":"/2019/11/01/postman-variables-usages","result":{"data":{"site":{"siteMetadata":{"title":"<bbon />","siteUrl":"https://bbon.me"}},"markdownRemark":{"id":"cff25c3f-020f-5ce9-a586-005baacbe10a","excerpt":"HTTP API  웹 응용프로그램을 작성할 때,  Postman 을 많이 사용합니다. 작성한 API 가 잘 동작하는지 클라이언트에서 사용하는 것과 동일한 요청을 GUI…","html":"<p>HTTP API  웹 응용프로그램을 작성할 때,  <a href=\"https://www.getpostman.com/\">Postman</a> 을 많이 사용합니다.</p>\n<p>작성한 API 가 잘 동작하는지 클라이언트에서 사용하는 것과 동일한 요청을 GUI를 통해 실행할 수 있어 매우 편리합니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e3d96b6986c2df911fc55d65075c1304/3b5a6/postman-variable-usage-001.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 66.45569620253164%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABYlAAAWJQFJUiTwAAABwElEQVR42o2STXKcMBCFuUr4GQySQFJLAsTPMHZlSMqVXVbJSXKJ7HO1XOalJGbK5cm47MVXr2mJ1900ybIsWNcVXdfBWgvnbNQY25f4HsZaTJ3BunzGePoOP29Itm3DbnrEdlrw/PULzudzzM3LguPx+CbresI09nj88Rvffv3F8ecfJMYYkCFYa2CdRXg2IbaEdRlhDO25cI8IRCZ2pomgtY6QVtBawpBCEkY1xqLvhzhG3/cYvMc8eTyNHXwXPkMH51w8c52HlhJKNhBCvKIRInRoYTsBPzcYRw1DEk0jwLlAzTg4fyG8FGPGIuwOiZQSjNVgvIpa1zWqqorUF/2PcKfe796StNEwuPOo/Kare7A3ugsTJb2zCF1KJaGUuqiMubZtd+R+dsWQAbl9mWT3JWpL6MNSns9PmKYJ3vuo4zRinhcMfo65cRgwOBONY+GruVavVIZCSiIhs/8uWhOU0rGbViqIZjdomwYNZyjL8l0OZYkkS1NkWQ6hHTirwcsCD4cc1eGiZYEsy5Cm6YdIiqJAMK2FghtXdKQg6gcURY4iz6NeDYO+x26YpahYA+NXtIpQlgd8uqn8EbNg+A8eYJU7F3kzMgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/e3d96b6986c2df911fc55d65075c1304/18dfc/postman-variable-usage-001.webp 158w,\n/static/e3d96b6986c2df911fc55d65075c1304/30002/postman-variable-usage-001.webp 315w,\n/static/e3d96b6986c2df911fc55d65075c1304/e59cf/postman-variable-usage-001.webp 630w,\n/static/e3d96b6986c2df911fc55d65075c1304/7bcb4/postman-variable-usage-001.webp 945w,\n/static/e3d96b6986c2df911fc55d65075c1304/bd21a/postman-variable-usage-001.webp 1260w,\n/static/e3d96b6986c2df911fc55d65075c1304/633a6/postman-variable-usage-001.webp 1302w\"\n              sizes=\"(max-width: 630px) 100vw, 630px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/e3d96b6986c2df911fc55d65075c1304/4d6f2/postman-variable-usage-001.png 158w,\n/static/e3d96b6986c2df911fc55d65075c1304/3c1ae/postman-variable-usage-001.png 315w,\n/static/e3d96b6986c2df911fc55d65075c1304/984b6/postman-variable-usage-001.png 630w,\n/static/e3d96b6986c2df911fc55d65075c1304/e7d8e/postman-variable-usage-001.png 945w,\n/static/e3d96b6986c2df911fc55d65075c1304/58c38/postman-variable-usage-001.png 1260w,\n/static/e3d96b6986c2df911fc55d65075c1304/3b5a6/postman-variable-usage-001.png 1302w\"\n            sizes=\"(max-width: 630px) 100vw, 630px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/e3d96b6986c2df911fc55d65075c1304/984b6/postman-variable-usage-001.png\"\n            alt=\"postman variable usage 001\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p><a href=\"https://www.getpostman.com/pricing\">무료 요금제</a> 를 사용해도 매우 많은 기능을 제공합니다.</p>\n<p>많은 기능 중 반복되는 값 - 예를 들면 기본 주소 -을 처리하기 위한 변수 기능을 좋아합니다.</p>\n<h2>변수 <small>Variable</small></h2>\n<h3>종류</h3>\n<p>변수는 글로벌, 콜렉션, 환경, 데이터, 로컬 단위로 관리가 가능합니다.</p>\n<blockquote>\n<ul>\n<li><a href=\"https://learning.getpostman.com/docs/postman/environments-and-globals/variables/#variable-scopes\">Variables scopes</a></li>\n</ul>\n</blockquote>\n<p>전역 변수와 환경 변수는 오른쪽 위 버튼을 클릭하면 관리 화면을 찾을 수 있습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 612px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/3d808d2ab61caacb3b77e00612421d18/dbf98/postman-variable-usage-002.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 38.60759493670886%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAABJklEQVR42o2QzU6DQBSF53FaYCjDDL8NyO8kpOlCQgVMXLjwFVy6MXHn1qfynY6Za6ltE5MuvgSG883lXCalD+FLBFLgY1YYKx8iiBCFIdI0RRzHSJLkSAqtWzxODwijCFVVoa5rlGWJoigow5SUEFIhUR6+3zK83kukdzWqskDTNBTUWpNU1Q1enp/w9fmOKE4wDAOx3++x2+2Q5zmY67owcG5wwF0XjuMQtm2f4JwT7vG753nYbDZY/AV2LlmWDd/3cTgcMM8zxnHENE30bKqZv13qtW2LMAzRdR2tpe97bLdbsGXyLw6EECQbwVRutabKZp9/u0zoXUqJLMuglKIhQRBcX8ipznq9vmC1Wl3UXzBZy7JOjjlj/wVvYcmeO+xW+VZ+AO8ZBXZrZlkaAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/3d808d2ab61caacb3b77e00612421d18/18dfc/postman-variable-usage-002.webp 158w,\n/static/3d808d2ab61caacb3b77e00612421d18/30002/postman-variable-usage-002.webp 315w,\n/static/3d808d2ab61caacb3b77e00612421d18/d408e/postman-variable-usage-002.webp 612w\"\n              sizes=\"(max-width: 612px) 100vw, 612px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/3d808d2ab61caacb3b77e00612421d18/4d6f2/postman-variable-usage-002.png 158w,\n/static/3d808d2ab61caacb3b77e00612421d18/3c1ae/postman-variable-usage-002.png 315w,\n/static/3d808d2ab61caacb3b77e00612421d18/dbf98/postman-variable-usage-002.png 612w\"\n            sizes=\"(max-width: 612px) 100vw, 612px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/3d808d2ab61caacb3b77e00612421d18/dbf98/postman-variable-usage-002.png\"\n            alt=\"postman variable usage 002\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<blockquote>\n<ul>\n<li><a href=\"https://learning.getpostman.com/docs/postman/environments-and-globals/manage-globals/\">Managing global variables</a></li>\n</ul>\n</blockquote>\n<p>콜렉션 변수는 콜렉션 편집 화면에서 찾을 수 있습니다.</p>\n<blockquote>\n<ul>\n<li><a href=\"https://learning.getpostman.com/docs/postman/collections/managing-collections/#edit-and-view-collection-details\">Edit and view collection detail</a></li>\n</ul>\n</blockquote>\n<h3>사용</h3>\n<p>HTTP API 는 기본적으로 하나의 기능이 하나의 URI를 갖습니다.</p>\n<p>인증처리를 하는 URI</p>\n<div class=\"gatsby-highlight\" data-language=\"http\"><pre class=\"language-http\"><code class=\"language-http\">POST https://your-service.com/api/signin\n{\n    \"username\": \"&lt;your username>\",\n    \"password\": \"&lt;your password>\"\n}</code></pre></div>\n<p>매장 정보를 요청하는 URI</p>\n<div class=\"gatsby-highlight\" data-language=\"http\"><pre class=\"language-http\"><code class=\"language-http\">GET https://your-service.com/api/stores\nAuthorization Bearer &lt;your token></code></pre></div>\n<p>Postman 을 사용하면 보통 한번만 작성한 후 저장하면, 다시 불러서 사용할 수 있습니다.</p>\n<p>그런데, 동일한 API를 테스트 서버 대상, 스테이징 서버 대상, 프로덕션 서버 대상으로 테스트를 진행하려고 하면 주소 앞부분만 다르고 나머지 부분이 동일할 수 있습니다.</p>\n<blockquote>\n<p>해당 시나리오는 환경 변수를 사용하는 것이 더 좋겠습니다.</p>\n</blockquote>\n<p>예제 URI 의 <code class=\"language-text\">https://your-service.com</code> 부분이 다를 것입니다.</p>\n<p>콜렉션 편집 화면을 열고 변수 탭에서 아래 이미지와 같이 변수를 추가합니다.</p>\n<blockquote>\n<p>기본주소를 <code class=\"language-text\">http://localhost:3000</code> 으로 설정합니다.</p>\n</blockquote>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ddcf17017ec9bca1ce19b3a555d5b9b7/bb7f4/postman-variable-usage-003.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 43.67088607594937%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABYlAAAWJQFJUiTwAAABH0lEQVR42qVR2Y7CMBDL9+SYNL05WqCwL0spiP//F6880LJCQlppHyxn3InHk5r9fo9hGNC2LfI8R1EUyn/F3F+WJeq6htlsNipSIP8HNDZMx5Tb7XaZ9LuJdVkUSM9EWn8A+01VVYvAyBSp8UyeTQ+7Hrtdp6Zq/iGlSSkhxogsy7SZzPqhJRQpQ5MFnOqIryZilQvqJJAQ4N8QQoDhxa7rICLw3itzfWqc6KxFU1fgWzO1BI/gnfZGCSjFIYlHGal7mGma0Pe9ujvnlJmSyWlurcNqvcbxdMJwPKJtVxCmT0l78pQpuIkmHMcRTdNoQXAyjQmerbU4DANutzum6w2X6YrzeFnwfX6x/uU5FVef137Ha9iDg8hTk+XbfPcHfVsgtgbD5D0AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/ddcf17017ec9bca1ce19b3a555d5b9b7/18dfc/postman-variable-usage-003.webp 158w,\n/static/ddcf17017ec9bca1ce19b3a555d5b9b7/30002/postman-variable-usage-003.webp 315w,\n/static/ddcf17017ec9bca1ce19b3a555d5b9b7/e59cf/postman-variable-usage-003.webp 630w,\n/static/ddcf17017ec9bca1ce19b3a555d5b9b7/7bcb4/postman-variable-usage-003.webp 945w,\n/static/ddcf17017ec9bca1ce19b3a555d5b9b7/d36b8/postman-variable-usage-003.webp 1192w\"\n              sizes=\"(max-width: 630px) 100vw, 630px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/ddcf17017ec9bca1ce19b3a555d5b9b7/4d6f2/postman-variable-usage-003.png 158w,\n/static/ddcf17017ec9bca1ce19b3a555d5b9b7/3c1ae/postman-variable-usage-003.png 315w,\n/static/ddcf17017ec9bca1ce19b3a555d5b9b7/984b6/postman-variable-usage-003.png 630w,\n/static/ddcf17017ec9bca1ce19b3a555d5b9b7/e7d8e/postman-variable-usage-003.png 945w,\n/static/ddcf17017ec9bca1ce19b3a555d5b9b7/bb7f4/postman-variable-usage-003.png 1192w\"\n            sizes=\"(max-width: 630px) 100vw, 630px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/ddcf17017ec9bca1ce19b3a555d5b9b7/984b6/postman-variable-usage-003.png\"\n            alt=\"postman variable usage 003\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<h2>예제</h2>\n<p>테스트 대상 웹 응용프로그램의 기본주소는 <code class=\"language-text\">http://localhost:3000</code> 입니다.</p>\n<p><code class=\"language-text\">/api/signin</code> 끝점으로 POST 요청을 하면 token 데이터를 얻을 수 있습니다.</p>\n<p><code class=\"language-text\">/api/stores</code> 끝점으로 요청 헤더에 Bearer 인증을 추가해서 GET 요청을 하면 사용자의 매장 정보를 얻을 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"http\"><pre class=\"language-http\"><code class=\"language-http\">POST /api/signin\n\n{\n    username,\n    password\n}</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"http\"><pre class=\"language-http\"><code class=\"language-http\">GET /api/stores\nAuthorization Bearer</code></pre></div>\n<p>Postman 컬렉션 편집 윈도우를 열고, 아래 변수 항목을 추가합니다.</p>\n<table>\n<thead>\n<tr>\n<th align=\"left\">이름</th>\n<th align=\"left\">초기값</th>\n<th align=\"left\">현재값</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"left\">baseurl</td>\n<td align=\"left\"></td>\n<td align=\"left\"><a href=\"http://localhost:3000\">http://localhost:3000</a></td>\n</tr>\n<tr>\n<td align=\"left\">token</td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n</tr>\n</tbody>\n</table>\n<p>Postman 의 현재 컬렉션에 signin 요청을 추가합니다.</p>\n<p>요청 URL은 <code class=\"language-text\">{{baseurl}}/api/signin</code> 을 입력합니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/3072892182ed117dbf4dd811d2eafab7/9d567/postman-variable-usage-004.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 35.44303797468354%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAABHUlEQVR42p2STWrDQAyFfZwkHjsej0bj8c/YiUPjLLLptgcp9CK9WO/zFYeEQkspdPEtpCd4T0LZnJRDH9G6IjhLlIq6tpTlnqIofmCMwXtlOZ+5PB3po9BFpYsNaRjIjvNM1/eIeNR7Qgg3vPe/4kRQVzG1PcN0JXYzQ1h7NdnpdCKlxGFMPE2Jy7Iw302GlG7ad8bpwNAJ4/Mb19cPxpd3xmmi7Xuyh+sjld4SKsthYGgDqvqlNQGvAS+CczXOOWoniBM6dURfk6kGxAuxbZB1FQ00saFvWxqVe08RccS2pbIOty8pyvJ+V4MpDFKVSFWQ2cpi3ZbQGULYU9uS3W7HZrtl+wfr3IPNvc6steQmx5j85raS5/m/WD/gE6H74ooQ1MVzAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/3072892182ed117dbf4dd811d2eafab7/18dfc/postman-variable-usage-004.webp 158w,\n/static/3072892182ed117dbf4dd811d2eafab7/30002/postman-variable-usage-004.webp 315w,\n/static/3072892182ed117dbf4dd811d2eafab7/e59cf/postman-variable-usage-004.webp 630w,\n/static/3072892182ed117dbf4dd811d2eafab7/7bcb4/postman-variable-usage-004.webp 945w,\n/static/3072892182ed117dbf4dd811d2eafab7/bd21a/postman-variable-usage-004.webp 1260w,\n/static/3072892182ed117dbf4dd811d2eafab7/8717b/postman-variable-usage-004.webp 1360w\"\n              sizes=\"(max-width: 630px) 100vw, 630px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/3072892182ed117dbf4dd811d2eafab7/4d6f2/postman-variable-usage-004.png 158w,\n/static/3072892182ed117dbf4dd811d2eafab7/3c1ae/postman-variable-usage-004.png 315w,\n/static/3072892182ed117dbf4dd811d2eafab7/984b6/postman-variable-usage-004.png 630w,\n/static/3072892182ed117dbf4dd811d2eafab7/e7d8e/postman-variable-usage-004.png 945w,\n/static/3072892182ed117dbf4dd811d2eafab7/58c38/postman-variable-usage-004.png 1260w,\n/static/3072892182ed117dbf4dd811d2eafab7/9d567/postman-variable-usage-004.png 1360w\"\n            sizes=\"(max-width: 630px) 100vw, 630px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/3072892182ed117dbf4dd811d2eafab7/984b6/postman-variable-usage-004.png\"\n            alt=\"postman variable usage 004\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>응답에서 token 변수의 값을 설정하기 위해 Tests 탭으로 이동합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">pm<span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token string\">'call'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">var</span> jsonData <span class=\"token operator\">=</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span>responseBody<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>jsonData<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>jsonData<span class=\"token punctuation\">.</span>success<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>jsonData<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n                <span class=\"token keyword\">const</span> token <span class=\"token operator\">=</span> jsonData<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>token<span class=\"token punctuation\">;</span>\n                pm<span class=\"token punctuation\">.</span>environment<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"token\"</span><span class=\"token punctuation\">,</span> token<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// token 변수의 값을 설정</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ecb853a6aefeaf897d6e07dcff45c5b1/2637b/postman-variable-usage-005.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 55.69620253164557%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAABnklEQVR42o2SW47cIBREvZ02GGyDAeMGu1vTnklLUdaQ7ywgW8pysqMTQT+Ul0bzcWSwUVFV180aR7Yl4MYeb3qi7RmGAaUUUsp/EEIwjiP7vvO2v3CMgTh75hBI6UiTcyLGhXE0jMYyGoO19l2MtXhrOBWhOTOHhcUZwmRoyk3btnHaVl5PieunNy6XCzklcs5PUiHd9+tGXhzr5298+f6T89cfnM4vpJRoQgjPm900VevOOybncMHjncd5TwyBNS/1m3MOY0oijw1nRpdYnGV2lqb0USLv+wXvDcZNeO8rnVK1y4LpNdFotFZ0XVd7XPORNUXWtBDnmXEYaIqzoe9ZU+L1euWyX5hnT4xzdVKGUGiF4NDe161g0JroJ+bJEKxBa42QkmaapucEl7yxbhs5eXIKtdviroj8MWkp0arD6I6hEygpOBwO1fXN4dAjRFtp2xvlwO/rB+392XeCZZBMvUR1sp4rWrXD0kl58Yj3EYqI0ZJRSXR3+z9L7Kfg37HeQwhJrzrmQVYG9R/Bj4o9KB1OWmL1LXJ1rRS/ALRKX3mtdNfAAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/ecb853a6aefeaf897d6e07dcff45c5b1/18dfc/postman-variable-usage-005.webp 158w,\n/static/ecb853a6aefeaf897d6e07dcff45c5b1/30002/postman-variable-usage-005.webp 315w,\n/static/ecb853a6aefeaf897d6e07dcff45c5b1/e59cf/postman-variable-usage-005.webp 630w,\n/static/ecb853a6aefeaf897d6e07dcff45c5b1/7bcb4/postman-variable-usage-005.webp 945w,\n/static/ecb853a6aefeaf897d6e07dcff45c5b1/bd21a/postman-variable-usage-005.webp 1260w,\n/static/ecb853a6aefeaf897d6e07dcff45c5b1/35ff6/postman-variable-usage-005.webp 1356w\"\n              sizes=\"(max-width: 630px) 100vw, 630px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/ecb853a6aefeaf897d6e07dcff45c5b1/4d6f2/postman-variable-usage-005.png 158w,\n/static/ecb853a6aefeaf897d6e07dcff45c5b1/3c1ae/postman-variable-usage-005.png 315w,\n/static/ecb853a6aefeaf897d6e07dcff45c5b1/984b6/postman-variable-usage-005.png 630w,\n/static/ecb853a6aefeaf897d6e07dcff45c5b1/e7d8e/postman-variable-usage-005.png 945w,\n/static/ecb853a6aefeaf897d6e07dcff45c5b1/58c38/postman-variable-usage-005.png 1260w,\n/static/ecb853a6aefeaf897d6e07dcff45c5b1/2637b/postman-variable-usage-005.png 1356w\"\n            sizes=\"(max-width: 630px) 100vw, 630px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/ecb853a6aefeaf897d6e07dcff45c5b1/984b6/postman-variable-usage-005.png\"\n            alt=\"postman variable usage 005\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<blockquote>\n<p>Test 탭의 오른쪽에 코드 조각이 제공됩니다.</p>\n</blockquote>\n<p>이제 <code class=\"language-text\">/api/signin</code> 끝점으로 요청을 보내면 응답 데이터에서 token 을 찾을 수 있으면 토큰 변수의 값이 설정됩니다.</p>\n<p>Postman 의 현재 컬렉션에 get stores 요청을 추가합니다.</p>\n<p>요청 URL은 <code class=\"language-text\">{{baseurl}}/api/stores</code> 를 입력합니다.</p>\n<p>Authorization 탭에서 인증 형식을 Bearer Token 으로 선택하고 토큰의 값은 변수를 사용할 것이므로 <code class=\"language-text\">{{token}}</code> 을 입력합니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/72c37c48ea1362786ed5f02d5809c08a/1b426/postman-variable-usage-006.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 48.10126582278481%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAABgUlEQVR42p2STW7UMBSAcxyYxHbs55/EScZJp3SqAQkJIdix4BwsewSOwaG4yYfiatqCxKaLz/Z7z36/boYU0VpXjNbk5DiVmeMYGcSSgyN6wVpb73RdxziOfLhceH9+x5wTcx6Y88haCs3pdCKEgPf+mSoHRDzyUu89wXusEwYxlCGR88YwLMxRSN7RHI+FnduycDnfcb6/p5RSo+2UF/uVbTtxnDzblwc+/vjN9v0XZS2s2w3NXvLttnKzLqQYSCk9ZxPCX9lfz04EEYeEAZ8WfMzMyTMlTxPFskTHHC1iDUprYozV8dXhlV3vr7IXondE6Qli6Y3G9uax5GHMxGFkzBkRqc13zj2xD8RaV9llcRbfK3yviVbjjKbtujqwZpoyUx6ZhkQMQtu29VHf9xwOhyof2pZgDdH1GGOqzfzDHnS3NfvytlM43eGNQnVdLVspVSNe0Uqhtar6/1Ez/Plt4+Fzplctbw7to4O2rZm9hubr6vm0uNpUpfTTJ38tfwDaiEMVheMLAwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/72c37c48ea1362786ed5f02d5809c08a/18dfc/postman-variable-usage-006.webp 158w,\n/static/72c37c48ea1362786ed5f02d5809c08a/30002/postman-variable-usage-006.webp 315w,\n/static/72c37c48ea1362786ed5f02d5809c08a/e59cf/postman-variable-usage-006.webp 630w,\n/static/72c37c48ea1362786ed5f02d5809c08a/7bcb4/postman-variable-usage-006.webp 945w,\n/static/72c37c48ea1362786ed5f02d5809c08a/bd21a/postman-variable-usage-006.webp 1260w,\n/static/72c37c48ea1362786ed5f02d5809c08a/29890/postman-variable-usage-006.webp 1335w\"\n              sizes=\"(max-width: 630px) 100vw, 630px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/72c37c48ea1362786ed5f02d5809c08a/4d6f2/postman-variable-usage-006.png 158w,\n/static/72c37c48ea1362786ed5f02d5809c08a/3c1ae/postman-variable-usage-006.png 315w,\n/static/72c37c48ea1362786ed5f02d5809c08a/984b6/postman-variable-usage-006.png 630w,\n/static/72c37c48ea1362786ed5f02d5809c08a/e7d8e/postman-variable-usage-006.png 945w,\n/static/72c37c48ea1362786ed5f02d5809c08a/58c38/postman-variable-usage-006.png 1260w,\n/static/72c37c48ea1362786ed5f02d5809c08a/1b426/postman-variable-usage-006.png 1335w\"\n            sizes=\"(max-width: 630px) 100vw, 630px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/72c37c48ea1362786ed5f02d5809c08a/984b6/postman-variable-usage-006.png\"\n            alt=\"postman variable usage 006\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>준비를 마쳤습니다.</p>\n<p>Signin 요청을 먼저 실행해서 토큰을 얻고, Get stores 요청을 실행하면 이전 Signin 요청에서 얻은 토큰을 요청 헤더 인증 값으로 사용됩니다.</p>\n<p>그리고, 테스트 서버의 기본 주소가 변경되면 컬렉션 변수의 값만 변경하면 해당 컬렉션 내의 요청이 변경된 기본주소를 참조할 것 입니다.</p>\n<h2>오류 정정</h2>\n<p>2019-11-03 현재 컬렉션 변수는 스크립트 환경 <small>Pre-request Script, Tests</small> 에서 쓰기를 지원하지 않습니다.</p>\n<p>스크립트로 변수 값 쓰기를 하려면 전역 변수 또는 환경 변수를 사용해야 합니다.</p>\n<p>전역변수 쓰기</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">pm<span class=\"token punctuation\">.</span>globals<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"token\"</span><span class=\"token punctuation\">,</span> token<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>환경변수 쓰기</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">pm<span class=\"token punctuation\">.</span>environment<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"token\"</span><span class=\"token punctuation\">,</span> token<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2>참조</h2>\n<ul>\n<li><a href=\"https://learning.getpostman.com/\">Postman: Learning Center</a></li>\n<li><a href=\"https://blog.getpostman.com/2014/01/27/extracting-data-from-responses-and-chaining-requests/\">Extracting data from response and chaning requests</a></li>\n</ul>","frontmatter":{"title":"Postman: Variables usages","date":"2019-11-01","description":null,"categories":["howto"],"tags":["postman","test","tools","api","http api","restful api"],"github":null,"featuredImage":null,"draft":null,"comments":null}},"previous":{"fields":{"slug":"/2019/09/29/visual-studio-item-template/"},"frontmatter":{"title":"Visual Studio Item Template","draft":null,"comments":null,"featuredImage":null}},"next":{"fields":{"slug":"/2019/12/31/review-2019/"},"frontmatter":{"title":"Review 2019","draft":null,"comments":null,"featuredImage":null}}},"pageContext":{"id":"cff25c3f-020f-5ce9-a586-005baacbe10a","previousPostId":"f8e260f5-4fc4-5604-ad2b-5532cf420296","nextPostId":"4baa8c5f-d7fb-5961-8c8e-1cd453c040ab"}},"staticQueryHashes":["2644450635","3199328057"],"slicesMap":{}}