<!DOCTYPE html><html lang="ko" prefix="og: http://ogp.me/ns#"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title>MariaDB 를 빠르게 설치 · {bbon}</title><meta name="description"><meta name="og:title" content="MariaDB 를 빠르게 설치"><meta name="og:type" content="website"><meta name="og:url" content="http://bbon.me/2019/02/24/MariaDB-를-빠르게-설치/"><meta name="og:image" content="/images/logo.png"><meta name="og:description"><meta name="twitter:card" content="summary"><meta name="witter:site" content="@bbonkr"><meta name="witter:creator" content="@bbonkr"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.ico"><link rel="stylesheet" href="/css/chiangmai.css"><link rel="stylesheet" href="/css/prism.css"><link rel="search" type="application/opensearchdescription+xml" href="http://bbon.me/atom.xml" title="{bbon}"><meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/atom.xml" title="{bbon}" type="application/atom+xml">
</head><body class="post"><div id="fb-root"></div><div class="wrap"><header><nav class="navi-post"><a class="navi-post-back" href="javascript:history.back()"><i class="fa fa-arrow-left" aria-hidden="true"></i></a><a class="navi-post-home" href="/"><i class="fa fa-home" aria-hidden="true"></i></a></nav></header><main class="post"><div class="post"><article class="post-block"><h1 class="post-title">MariaDB 를 빠르게 설치</h1><div class="post-info"><div class="post-info-profile"><a href="https://github.com/bbonkr" target="_blank"><img src="/images/me.png"></a></div><div class="post-info-details"><div class="post-categories"><a href="/categories/Computing" target="_self"><span>COMPUTING</span></a></div><div class="post-date">2019년 2월 24일</div></div></div><div class="post-share"><div class="fb-like" data-href="http://bbon.me/2019/02/24/MariaDB-를-빠르게-설치/" data-layout="button_count" data-action="like" data-size="small" data-show-faces="true" data-share="false">                 </div><div class="fb-share-button" data-href="http://bbon.me/2019/02/24/MariaDB-를-빠르게-설치/" data-layout="button" data-size="small" data-mobile-iframe="true"></div></div><div class="post-content"><h2 id="도커-Docker"><a href="#도커-Docker" class="headerlink" title="도커 Docker"></a>도커 Docker</h2><p><a href="https://www.docker.com/" target="_blank" rel="noopener">Docker</a>는 컨테이너를 사용해 애플리케이션을 신속하게 구축, 테스트 및 배포할 수 있는 소프트웨어 플랫폼입니다.</p>
<p>저는 개발 환경을 준비하기 위해 도커 <small>Docker</small>를 활용하고 있습니다.</p>
<h2 id="도커-설치"><a href="#도커-설치" class="headerlink" title="도커 설치"></a>도커 설치</h2><p><a href="https://hub.docker.com/editions/community/docker-ce-desktop-windows" target="_blank" rel="noopener">설치 파일</a>을 내려받아 설치합니다. 링크는 윈도우즈에서 도커를 사용하기 위해 필요합니다.</p>
<h2 id="이미지-검색"><a href="#이미지-검색" class="headerlink" title="이미지 검색"></a>이미지 검색</h2><p>MariaDB 이미지를 검색합니다.</p>
<pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell"><span class="token function">PS</span>> docker search mariadb
NAME                                                      DESCRIPTION                                     STARS               OFFICIAL            AUTOMATED
mariadb                                                   MariaDB is a community<span class="token operator">-</span>developed fork of MyS…   2596                <span class="token namespace">[OK]</span>
bitnami<span class="token operator">/</span>mariadb                                           Bitnami MariaDB Docker Image                    86                                      <span class="token namespace">[OK]</span>
linuxserver<span class="token operator">/</span>mariadb                                       A Mariadb container<span class="token punctuation">,</span> brought to you by Linux…   59
toughiq<span class="token operator">/</span>mariadb<span class="token operator">-</span>cluster                                   Dockerized Automated MariaDB Galera Cluster …   37                                      <span class="token namespace">[OK]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="이미지-다운로드"><a href="#이미지-다운로드" class="headerlink" title="이미지 다운로드"></a>이미지 다운로드</h2><p>공식 이미지를 다운로드합니다.</p>
<pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell"><span class="token function">PS</span>> docker pull mariadb<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h2 id="컨테이너-실행"><a href="#컨테이너-실행" class="headerlink" title="컨테이너 실행"></a>컨테이너 실행</h2><p>다운로드 받은 이미지로 컨테이너를 실행합니다.</p>
<blockquote>
<p>컨테이너 실행 인수와 환경변수는 <a href="https://hub.docker.com/_/mariadb" target="_blank" rel="noopener">docker hub mariadb</a>에서 확인할 수 있습니다.</p>
</blockquote>
<h2 id="docker-compose"><a href="#docker-compose" class="headerlink" title="docker-compose"></a>docker-compose</h2><p>docker-compose를 사용하면 컨테이너 실행시 복잡하게 입력해야 하는 인수를 미리 준비하고 컨테이너 실행, 중지, 제거 절차를 손쉽게 처리할 수 있습니다.</p>
<p>적당한 디렉터리에 docker-compose.yml 파일을 아래의 내용으로 작성합니다.</p>
<p>사용자 프로필 디렉터리에 docker 디렉터리를 만들고 컨테이너 이름에 해당하는 mariadb 디렉터리를 만들었습니다.<br>그 안에 config, data 디렉터리를 추가했습니다.<br>docker-compose.yml 파일은 mariadb 디렉터리에 있습니다.</p>
<p>사용자 프로필 디렉터리는 윈도우즈 탐색기를 열고 주소창에 %userprofile% 을 입력하면 바로 이동할 수 있습니다.</p>
<pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell"><span class="token function">PS</span>> tree <span class="token punctuation">.</span>
C:\USERS\<span class="token punctuation">&#123;</span>username<span class="token punctuation">&#125;</span>\DOCKER
└─mariadb
├─config
└─<span class="token keyword">data</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>docker-compose.yml 파일의 내용입니다.</p>
<pre class="line-numbers language-yml" data-language="yml"><code class="language-yml">version: &quot;3.1&quot;

services:
  db:
    container_name: mariadb
    image: mariadb:latest
    restart: always
    ports:
      - 3306:3306
    volumes:
      - &#x2F;c&#x2F;Users&#x2F;&#123;username&#125;&#x2F;docker&#x2F;mariadb&#x2F;data:&#x2F;var&#x2F;lib&#x2F;mysql
      - &#x2F;c&#x2F;Users&#x2F;&#123;username&#125;&#x2F;docker&#x2F;mariadb&#x2F;config:&#x2F;etc&#x2F;mysql&#x2F;conf.d
    environment:
      MYSQL_ROOT_PASSWORD: &#123; password &#125;
      TZ: Asia&#x2F;Seoul<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<blockquote>
<p>{username}: 윈도우즈 사용자 계정이름으로 변경이 필요합니다.<br>{password}: mariadb root 계정의 비밀번호로 변경이 필요합니다. (원하는 값으로 변경합니다.)</p>
</blockquote>
<p>mariadb/config 디렉터리에는 미리 구성한 cnf 파일을 추가합니다.</p>
<p>제가 사용하는 문자셋과 정렬을 구성한 mariadb.cnf 파일의 내용은 아래와 같습니다.</p>
<pre class="line-numbers language-ini" data-language="ini"><code class="language-ini"><span class="token comment"># MariaDB-specific config file.</span>
<span class="token comment"># Read by /etc/mysql/my.cnf</span>

<span class="token selector">[client]</span>
<span class="token comment"># Default is Latin1, if you need UTF-8 set this (also in server section)</span>
<span class="token comment">#default-character-set = utf8</span>
<span class="token constant">default-character-set</span> <span class="token attr-value"><span class="token punctuation">=</span> utf8mb4</span>

<span class="token selector">[mysql]</span>
<span class="token constant">default-character-set</span> <span class="token attr-value"><span class="token punctuation">=</span> utf8mb4</span>

<span class="token selector">[mysqld]</span>
<span class="token comment">#</span>
<span class="token comment"># * Character sets</span>
<span class="token comment">#</span>
<span class="token comment"># Default is Latin1, if you need UTF-8 set all this (also in client section)</span>
<span class="token comment">#</span>
<span class="token comment">#character-set-server  = utf8</span>
<span class="token comment">#collation-server      = utf8_general_ci</span>
<span class="token comment">#character_set_server   = utf8</span>
<span class="token comment">#collation_server       = utf8_general_ci</span>
<span class="token comment"># Import all .cnf files from configuration directory</span>
<span class="token constant">character-set-client-handshake</span> <span class="token attr-value"><span class="token punctuation">=</span> FALSE</span>
<span class="token constant">character-set-server</span> <span class="token attr-value"><span class="token punctuation">=</span> utf8mb4</span>
<span class="token constant">collation-server</span> <span class="token attr-value"><span class="token punctuation">=</span> utf8mb4_unicode_ci</span>

!includedir /etc/mysql/mariadb.conf.d/<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>docker-compose.yml 파일을 작성했으면, 해당 파일이 있는 위치에서 아래 명령으로 컨테이너는 작성하고 실행합니다.</p>
<pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell"><span class="token function">PS</span>> docker<span class="token operator">-</span>compose up <span class="token operator">-</span>d<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>컨테이너 상태를 확인하려면 ps 명령을 사용합니다.</p>
<pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell"><span class="token function">PS</span>> docker<span class="token operator">-</span>compose <span class="token function">ps</span>
The system cannot find the path specified<span class="token punctuation">.</span>
 Name               Command             State           Ports
<span class="token operator">--</span>-<span class="token operator">--</span>-<span class="token operator">--</span>-<span class="token operator">--</span>-<span class="token operator">--</span>-<span class="token operator">--</span>-<span class="token operator">--</span>-<span class="token operator">--</span>-<span class="token operator">--</span>-<span class="token operator">--</span>-<span class="token operator">--</span>-<span class="token operator">--</span>-<span class="token operator">--</span>-<span class="token operator">--</span>-<span class="token operator">--</span>-<span class="token operator">--</span>-<span class="token operator">--</span>-<span class="token operator">--</span>-<span class="token operator">--</span>-<span class="token operator">--</span>-<span class="token operator">--</span>-<span class="token operator">--</span>-<span class="token operator">--</span>-<span class="token operator">-</span>
mariadb   docker<span class="token operator">-</span>entrypoint<span class="token punctuation">.</span>sh mysqld   Up      0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0:3306<span class="token operator">-</span>>3306<span class="token operator">/</span>tcp<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>컨테이너를 중지하려면 stop 명령을 사용합니다.</p>
<pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell"><span class="token function">PS</span>> docker<span class="token operator">-</span>compose stop<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>컨테이너를 시작하려면 start 명령을 사용합니다.</p>
<pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell"><span class="token function">PS</span>> docker<span class="token operator">-</span>compose <span class="token function">start</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>컨테이너를 제거하려면 down 명령을 사용합니다.</p>
<pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell"><span class="token function">ps</span>> docker<span class="token operator">-</span>compose down<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</div></article></div></main><footer><div class="paginator"><a class="prev" href="/2019/02/09/rename-app/"><i class="fa fa-arrow-left" aria-hidden="true"></i></a><a class="next" href="/2019/04/07/Microsoft-Store-File-Rename-App/"><i class="fa fa-arrow-right" aria-hidden="true"></i></a></div><div class="copyright"><p>© 2019 - 2021 <a href="https://github.com/bbonkr" target="_blank">bbon</a>. Powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/stunstunstun/hexo-theme-chiangmai" target="_blank">hexo-theme-chiangmai</a>.</p></div></footer></div><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create','UA-64779499-1','auto');ga('send','pageview');</script></body></html>