<!DOCTYPE html><html lang="ko" prefix="og: http://ogp.me/ns#"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title>Python mysqlclient 패키지 설치 문제 · {bbon}</title><meta name="description"><meta name="og:title" content="Python mysqlclient 패키지 설치 문제"><meta name="og:type" content="website"><meta name="og:url" content="http://bbon.me/2019/06/29/python-mysqlclient-패키지-설치/"><meta name="og:image" content="/images/logo.png"><meta name="og:description"><meta name="twitter:card" content="summary"><meta name="witter:site" content="@bbonkr"><meta name="witter:creator" content="@bbonkr"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.ico"><link rel="stylesheet" href="/css/chiangmai.css"><link rel="stylesheet" href="/css/prism.css"><link rel="search" type="application/opensearchdescription+xml" href="http://bbon.me/atom.xml" title="{bbon}"><meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/atom.xml" title="{bbon}" type="application/atom+xml">
</head><body class="post"><div id="fb-root"></div><div class="wrap"><header><nav class="navi-post"><a class="navi-post-back" href="javascript:history.back()"><i class="fa fa-arrow-left" aria-hidden="true"></i></a><a class="navi-post-home" href="/"><i class="fa fa-home" aria-hidden="true"></i></a></nav></header><main class="post"><div class="post"><article class="post-block"><h1 class="post-title">Python mysqlclient 패키지 설치 문제</h1><div class="post-info"><div class="post-info-profile"><a href="https://github.com/bbonkr" target="_blank"><img src="/images/me.png"></a></div><div class="post-info-details"><div class="post-categories"><a href="/categories/HowTo" target="_self"><span>HOWTO</span></a></div><div class="post-date">2019년 6월 29일</div></div></div><div class="post-share"><div class="fb-like" data-href="http://bbon.me/2019/06/29/python-mysqlclient-패키지-설치/" data-layout="button_count" data-action="like" data-size="small" data-show-faces="true" data-share="false">                 </div><div class="fb-share-button" data-href="http://bbon.me/2019/06/29/python-mysqlclient-패키지-설치/" data-layout="button" data-size="small" data-mobile-iframe="true"></div></div><div class="post-content"><p>Django 프로젝트를 만들고, 데이터베이스 연결 구성을 위해 <code>mysqlclient</code> 패키지를 설치하던 중 문제가 발생했습니다.</p>
<h2 id="환경"><a href="#환경" class="headerlink" title="환경"></a>환경</h2><ul>
<li>  macOS Mojave 10.14.5</li>
<li>  Python 3.7.3</li>
<li>  pip 19.1.1 (Python 3.7)</li>
</ul>
<h2 id="문제"><a href="#문제" class="headerlink" title="문제"></a>문제</h2><p>터미널에서 아래 명령으로 <code>mysqlclient</code> 패키지 설치를 실행하면 에러가 발생합니다.</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ pip3 <span class="token function">install</span> mysqlclient
Collecting mysqlclient
  Using cached https://files.pythonhosted.org/packages/f4/f1/3bb6f64ca7a429729413e6556b7ba5976df06019a5245a43d36032f1061e/mysqlclient-1.4.2.post1.tar.gz
    ERROR: Complete output from <span class="token builtin class-name">command</span> python setup.py egg_info:
    ERROR: Traceback <span class="token punctuation">(</span>most recent call last<span class="token punctuation">)</span>:
      File <span class="token string">"&lt;string>"</span>, line <span class="token number">1</span>, <span class="token keyword">in</span> <span class="token operator">&lt;</span>module<span class="token operator">></span>
      File <span class="token string">"/private/var/folders/df/8jqrf7b543z2ff2s0rhbq54c0000gn/T/pip-install-v5w8wcwf/mysqlclient/setup.py"</span>, line <span class="token number">16</span>, <span class="token keyword">in</span> <span class="token operator">&lt;</span>module<span class="token operator">></span>
        metadata, options <span class="token operator">=</span> get_config<span class="token punctuation">(</span><span class="token punctuation">)</span>
      File <span class="token string">"/private/var/folders/df/8jqrf7b543z2ff2s0rhbq54c0000gn/T/pip-install-v5w8wcwf/mysqlclient/setup_posix.py"</span>, line <span class="token number">53</span>, <span class="token keyword">in</span> get_config
        libraries <span class="token operator">=</span> <span class="token punctuation">[</span>dequote<span class="token punctuation">(</span>i<span class="token punctuation">[</span><span class="token number">2</span>:<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> libs <span class="token keyword">if</span> i.startswith<span class="token punctuation">(</span><span class="token string">'-l'</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
      File <span class="token string">"/private/var/folders/df/8jqrf7b543z2ff2s0rhbq54c0000gn/T/pip-install-v5w8wcwf/mysqlclient/setup_posix.py"</span>, line <span class="token number">53</span>, <span class="token keyword">in</span> <span class="token operator">&lt;</span>listcomp<span class="token operator">></span>
        libraries <span class="token operator">=</span> <span class="token punctuation">[</span>dequote<span class="token punctuation">(</span>i<span class="token punctuation">[</span><span class="token number">2</span>:<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> libs <span class="token keyword">if</span> i.startswith<span class="token punctuation">(</span><span class="token string">'-l'</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
      File <span class="token string">"/private/var/folders/df/8jqrf7b543z2ff2s0rhbq54c0000gn/T/pip-install-v5w8wcwf/mysqlclient/setup_posix.py"</span>, line <span class="token number">12</span>, <span class="token keyword">in</span> dequote
        raise Exception<span class="token punctuation">(</span><span class="token string">"Wrong MySQL configuration: maybe https://bugs.mysql.com/bug.php?id=86971 ?"</span><span class="token punctuation">)</span>
    Exception: Wrong MySQL configuration: maybe https://bugs.mysql.com/bug.php?id<span class="token operator">=</span><span class="token number">86971</span> ?
    ----------------------------------------
ERROR: Command <span class="token string">"python setup.py egg_info"</span> failed with error code <span class="token number">1</span> <span class="token keyword">in</span> /private/var/folders/df/8jqrf7b543z2ff2s0rhbq54c0000gn/T/pip-install-v5w8wcwf/mysqlclient/<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="해결"><a href="#해결" class="headerlink" title="해결"></a>해결</h2><p>먼저 <code>mysqlclient</code> 문서를 확인합니다.</p>
<dl><dt><code>mysqlclient</code> 문서</dt><dd><a href="https://pypi.org/project/mysqlclient/" target="_blank" rel="noopener">mysqlclient - PyPI</a></dd></dl><p>필요한 의존 패키지를 설치합니다.</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ brew <span class="token function">install</span> mysql-connector-c<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>앞서 설치한 의존 패키지 MySQL Connector/C 의 기본 구성이 부정확해서 내용을 변경해야 합니다.</p>
<p>mysql_config 구성을 수정해야 합니다.</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">which</span> mysql_config                    <span class="token comment"># 파일의 위치를 찾습니다.</span>
/usr/local/bin/mysql_config
$ <span class="token function">sudo</span> <span class="token function">nano</span> /usr/local/bin/mysql_config <span class="token comment"># 편집기로 파일을 수정합니다.</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p>아래 내용을 찾아서 변경합니다.</p>
<blockquote>
<p>on macOS, on or about line 112:</p>
</blockquote>
<p>원본:</p>
<pre class="line-numbers language-ini" data-language="ini"><code class="language-ini"><span class="token comment"># Create options</span>
<span class="token constant">libs</span><span class="token attr-value"><span class="token punctuation">=</span>"-L$pkglibdir"</span>
<span class="token constant">libs</span><span class="token attr-value"><span class="token punctuation">=</span>"$libs -l "</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p>변경:</p>
<pre class="line-numbers language-ini" data-language="ini"><code class="language-ini"><span class="token comment"># Create options</span>
<span class="token constant">libs</span><span class="token attr-value"><span class="token punctuation">=</span>"-L$pkglibdir"</span>
<span class="token comment"># libs="$libs -l "</span>
<span class="token constant">libs</span><span class="token attr-value"><span class="token punctuation">=</span>"$libs -lmysqlclient -lssl -lcrypto"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<p>SSL 관련 문제가 발생하면 아래 명령으로 정보를 확인해서 문제를 해결해야 합니다.</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ brew info openssl<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>이제 mysqlclient 패키지를 문제없이 설치할 수 있습니다.</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ pip3 <span class="token function">install</span> mysqlclient
Collecting mysqlclient
  Using cached https://files.pythonhosted.org/packages/f4/f1/3bb6f64ca7a429729413e6556b7ba5976df06019a5245a43d36032f1061e/mysqlclient-1.4.2.post1.tar.gz
Building wheels <span class="token keyword">for</span> collected packages: mysqlclient
  Building wheel <span class="token keyword">for</span> mysqlclient <span class="token punctuation">(</span>setup.py<span class="token punctuation">)</span> <span class="token punctuation">..</span>. <span class="token keyword">done</span>
  Stored <span class="token keyword">in</span> directory: /Users/bbon/Library/Caches/pip/wheels/30/91/e0/2ee952bce05b1247807405c6710c6130e49468a5240ae27134
Successfully built mysqlclient
Installing collected packages: mysqlclient
Successfully installed mysqlclient-1.4.2.post1<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
</div></article></div></main><footer><div class="paginator"><a class="prev" href="/2019/06/28/Node-Blog-App/"><i class="fa fa-arrow-left" aria-hidden="true"></i></a><a class="next" href="/2019/07/10/update-your-apps-to-be-64-bit-compliant-by-2019-08-01/"><i class="fa fa-arrow-right" aria-hidden="true"></i></a></div><div class="copyright"><p>© 2019 - 2021 <a href="https://github.com/bbonkr" target="_blank">bbon</a>. Powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/stunstunstun/hexo-theme-chiangmai" target="_blank">hexo-theme-chiangmai</a>.</p></div></footer></div><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create','UA-64779499-1','auto');ga('send','pageview');</script></body></html>